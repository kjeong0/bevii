<head>
    <title>MakeItRain Corp</title>
</head>

<body>
    <h1>Rock, Paper, Scissors Posse</h1>
    {{> userCount}}
    {{> loginButtons}}
    {{#if currentUser}}
        {{> rps}}
    {{/if}}
</body>

<template name="matches">
    {{#each matches}}
        matchName
    {{/each}}
</template>

<template name="rps">
    {{#if userInMatch}}
        {{#each matches}}
            <div>
                {{#if makeMove}}
                    <h3>{{playerOne}} vs. {{playerTwo}}</h3>
                    <div>
                        <button id="rock" class="rps" value="rock">Rock</button>
                        <button id="paper" class="rps" value="paper">Paper</button>
                        <button id="scissors" class="rps" value="scissors">Scissors</button>
                        <p>Select your move!</p>
                    </div>
                {{else}}
                    {{#if waitingForOtherPlayer}}
                        <h3>{{playerOne}} vs. {{playerTwo}}</h3>
                        <div>Waiting for other player</div>
                    {{/if}}
                {{/if}}
            </div>
        {{/each}}
    {{else}}
        <div>
            <p>Challenge someone above!</p>
        </div>
    {{/if}}

    <h2>Match History</h2>
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Player 1</th>
                    <th>Player 2</th>
                    <th>Winner</th>
                </tr>
            </thead>
            <tbody>
                {{#each matches}}
                    {{#unless makeMove}}
                        {{#unless waitingForOtherPlayer}}
                            <tr>
                                <td>{{date}}</td>
                                <td>{{playerOne}}</td>
                                <td>{{playerTwo}}</td>
                                <td>{{winner}}</td>
                            </tr>
                        {{/unless}}
                    {{/unless}}
                {{/each}}
            </tbody>
        </table>
</template>

<template name="userCount">
    <div>
        <h2>{{usersOnlineCount}} human beings online</h2>
        <h2>Challenge someone!</h2>
        {{#each usersOnline}}
            <div>
                <button class="user" value="{{username}}">{{username}}</button>
            </div>
        {{/each}}
    </div>
</template>
